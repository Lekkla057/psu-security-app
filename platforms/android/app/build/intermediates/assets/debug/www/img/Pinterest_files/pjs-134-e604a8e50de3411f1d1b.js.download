webpackJsonp([134],{"0XFc":function(e,t,n){"use strict";var r=n("d6ZO"),m=n.n(r),i=n("RklN"),o=n.n(i),a=n("OIxG"),c=n("vJNz"),y=n("aC/n"),g=n("W/Cr"),l=n("p58k"),s=n("LQgx"),u=n("r/ec"),d=n("NyaW"),f=n("JyNp"),p=n("MQ2h"),b=n.n(p),v=n("+B8E"),h=n("Otfq"),S=n("gEaE");function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t,n){return t&&w(e.prototype,t),n&&w(e,n),e}function C(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?T(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function k(e,t){return(k=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e){function o(){var e,a;_(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return x(T(T(a=C(this,(e=j(o)).call.apply(e,[this].concat(n))))),"handleCancel",function(){a.props.dismissHandler()}),x(T(T(a)),"handleSuggestedBoardSelection",function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=a.props.onChangeBoardName,r=Object(i.findDOMNode)(a.textInput);if(r instanceof HTMLElement){var o=r.querySelector("input");o&&o.focus()}n(e,t)}),x(T(T(a)),"saveTextInputRef",function(e){a.textInput=e}),a}return P(o,e),O(o,[{key:"shouldComponentUpdate",value:function e(t){return!(this.props.saving&&!t.saving)}},{key:"renderFlyoutLoader",value:function e(){return m.a.createElement(S.b,{height:450,width:320,padding:4},m.a.createElement(S.m,{size:"sm"},g.a._("Saving your first pin...","Loading text while we save your first pin")),m.a.createElement(S.b,{marginTop:10},m.a.createElement(S.G,{show:!0,accessibilityLabel:g.a._("Saving your first pin...","Loading text while we save your first pin")})))}},{key:"renderFirstPinText",value:function e(){return m.a.createElement(S.b,{paddingX:4,paddingY:3},m.a.createElement(S.K,{size:"lg",bold:!0},g.a._("Where do you want to save this Pin?","Text asking a user what board they want to save their pin to")),m.a.createElement(S.K,{size:"sm"},g.a._("Click to create your first board!","Text indicating a user can select any of the following board names")))}},{key:"renderRow",value:function e(t){var n=t.item,r=t.hovered,o=t.sectionProps,a=void 0===o?{}:o,i="board_section"===n.type;return m.a.createElement(c.a,{disabled:!1,item:n,isSection:i,saveState:null,searchQuery:null,selected:r,size:"lg"})}},{key:"renderUserBoards",value:function e(t){var n=this.props.onCreate,r=[{items:t}],o=new l.a(r.map(function(e){return e.items}));return o.setSelectItem(n),m.a.createElement(h.a,{indexManager:o,onSelectItem:n,renderItem:this.renderRow,sections:r})}},{key:"renderFlyoutCreate",value:function e(){var t=this.props,n=t.boardResource,r=t.createBoardError,o=t.image,a=t.inputName,i=t.isFirstPin,c=t.nameValidatorErrors,l=t.onBoardCreate,s=t.onChangeBoardName,u=t.pinId,d=t.saving,f=0===c.length,p=!!a&&!d&&f&&!r,b=[];n.isLoaded&&(b=n.data.all_boards.slice(0,5));var h=new v.b(this.props.requestContext,"flyout_v2").getIntParamWithNoActivation(1);return m.a.createElement(S.b,{color:"white",direction:"column",display:"flex",height:"100%",position:"static",width:330},m.a.createElement(S.b,{maxHeight:420,overflow:"auto"},n.isLoaded&&0<b.length?m.a.createElement(S.b,null,m.a.createElement(S.b,{paddingX:4,paddingY:3},m.a.createElement(S.K,{size:"sm"},g.a._("Your boards","Text to indicate the following are the user's boards"))),this.renderUserBoards(b),m.a.createElement(S.j,null)):null,i?this.renderFirstPinText():m.a.createElement(S.b,{paddingX:4,paddingY:3},m.a.createElement(S.K,{size:"sm"},g.a._("Click to create a new board","Text indicating a user can select from the following to create a new board"))),m.a.createElement(y.a,{onBoardSelected:this.handleSuggestedBoardSelection,pinId:u,image:o,minHeight:336,inFlyoutExp:!0,oneTapFlyout:1===h})),m.a.createElement(S.j,null),m.a.createElement(S.b,{alignItems:"center",direction:"row",display:"flex",padding:2},m.a.createElement(S.b,{paddingX:2,flex:"grow"},m.a.createElement(S.M,{id:"boardEditName",onChange:function e(t){var n=t.value;return s(n)},placeholder:g.a._("Name your board","Placeholder text for the user to provide a name for their new board"),ref:this.saveTextInputRef,type:"text",value:a})),m.a.createElement(S.b,null,m.a.createElement(S.c,{disabled:!f||!p,onClick:l,color:"red",size:"md",text:g.a._("Create","button to create board")}))),!f&&m.a.createElement(S.b,{marginBottom:2,marginLeft:4,marginTop:1},c.map(function(e,t){return m.a.createElement(S.K,{color:"red",key:t,size:"sm"},e)})))}},{key:"render",value:function e(){var t=this.props,n=t.anchorRef,r=t.inModal,o=t.isFirstPin,a=t.saving,i;if(t.shownWithinMasonry)return m.a.createElement(u.a,{anchor:n,size:"lg",positionRelativeToAnchor:!r,onDismiss:this.handleCancel},o&&a?this.renderFlyoutLoader():this.renderFlyoutCreate());var c=m.a.createElement(S.k,{anchor:n,size:"lg",positionRelativeToAnchor:!r,onDismiss:this.handleCancel},o&&a?this.renderFlyoutLoader():this.renderFlyoutCreate()),l={overlay:{alignItems:"normal",display:"block",padding:0},content:{height:"100%",margin:0}};return r?m.a.createElement(s.a,{noButton:!0,onHide:this.handleCancel,style:l},c):c}}]),o}(r.Component);t.a=Object(p.compose)(Object(f.b)({name:"BoardPickerBoardsResource",key:"boardResource",options:function e(){return{field_set_key:"board_picker",shortlist_suggestions:5}}}),a.b,d.a)(I)},"1Xwf":function(e,t,n){"use strict";var d=n("d6ZO"),y=n.n(d),f=n("W/Cr"),r=n("JyNp"),o=n("suNN"),g=n("gEaE"),a=185;function i(e){var t=e.saveStatusResource.data;return t&&t.pinned_to_board?y.a.createElement(g.b,null,y.a.createElement(g.b,{color:"orange","data-test-id":"already-pinned",display:"flex",padding:3,shape:"rounded",width:a},y.a.createElement(g.K,{align:"center",bold:!0,color:"white",size:"sm"},Object(o.b)(f.a._("Psst! You already saved this Pin to {{ board_name }} ","Toast for already having repinned pin"),{board_name:(t.pinned_to_board||{}).name}).join(" "))),y.a.createElement(g.b,{display:"flex",justifyContent:"center",marginTop:-3},y.a.createElement(g.n,{accessibilityLabel:"",color:"orange",icon:"heart",size:26}))):null}var v=Object(r.b)({name:"PinSaveStatusResource",key:"saveStatusResource",options:function e(t){var n;return{id:t.pin.id}}},{allowStale:!1})(i),S=n("qtmg"),E=n("QuPB"),p=n("AcTh"),c,_=function e(t){var n=t.allowChange,r=t.description,o=t.editing,a=t.onHandleDescriptionBlur,i=t.onHandleDescriptionEdit,c=t.onRefTextArea,l=t.onChange,s=t.onCursorChange,u=function e(t){var n=t.description,r=t.editing,o=t.allowChange;return d.createElement(g.b,{display:"flex",justifyContent:"between",marginLeft:-1,marginRight:-1},d.createElement(g.b,{paddingX:1,overflow:"hidden"},d.createElement(g.K,{bold:!0,color:n.clamped?"darkGray":"gray",size:"sm"},n.clamped?n.clamped:f.a._("Tell us about this Pin..."))),d.createElement(g.b,{paddingX:1},!r&&o&&d.createElement(g.n,{accessibilityLabel:f.a._("Edit description"),icon:"edit"})))};return d.createElement(g.b,{mdDisplay:"flex"},o?d.createElement(p.a,{focused:!0,onBlur:a,onFocus:n&&i,onChange:l,onCursorChange:s,placeholder:f.a._("Tell us about this Pin..."),style:n&&{outline:"none",maxHeight:120,minHeight:60,width:"100%"},ref:c,rows:3,value:r.full}):d.createElement(g.b,{width:"100%"},n?d.createElement(g.P,{onTouch:i},d.createElement(u,{description:r,editing:o,allowChange:n})):d.createElement(u,{description:r,editing:o,allowChange:n})))},w=n("MH3C"),l=n("Kqaz");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function m(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?P(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}function j(e,t){return(j=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T="PinPanePinMeta",x=236,I=/#[^(. #,\/$%\^&\*;:{}=\`~()\[\]@|<>)]*/,B=/#[^(. #,\/$%\^&\*;:{}=\`~()\[\]@|<>)]*$/,R=0,L="g",A=function(e){function o(){var e,u;b(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return k(P(P(u=m(this,(e=O(o)).call.apply(e,[this].concat(n))))),"state",{cursorIndex:-1,flyoutCursorIndex:-1,description:u.props.pin&&u.props.pin.description&&u.props.pin.description.trim()||"",editing:!1,hashtagQuery:"",isHashtagFlyoutOpen:!1,editedBefore:!1,flyoutOpened:!1}),k(P(P(u)),"onDescriptionChange",function(e,t){var n=new RegExp(I,L),r="";if(t<e.length){for(var o=n.exec(e),a=n.lastIndex<t;o&&a;)o=n.exec(e),a=n.lastIndex<t;var i=!!o&&I.test(e.slice(o.index,t));a=!!o&&o.index<t,o&&i&&a&&(r=o[0])}else{var c=B.exec(e);r=c?c[0]:""}u.updateDescription(e);var l=I.test(r),s=u.state.isHashtagFlyoutOpen?u.state.flyoutCursorIndex:e.slice(0,t).lastIndexOf("#");u.setState({cursorIndex:t,flyoutCursorIndex:s,description:e,hashtagQuery:r,isHashtagFlyoutOpen:l,flyoutOpened:u.state.flyoutOpened||l})}),k(P(P(u)),"onCursorChange",function(e){var t=u.state,n=t.isHashtagFlyoutOpen,r=t.flyoutCursorIndex;n&&e<r&&u.setState({isHashtagFlyoutOpen:!1})}),k(P(P(u)),"updateDescription",function(e){u.props.updateDescription&&u.props.updateDescription(e)}),k(P(P(u)),"handleDescriptionBlur",function(e){var t=e.target.value.trim(),n=u.state.isHashtagFlyoutOpen;u.updateDescription(t),u.setState({description:t,editing:n})}),k(P(P(u)),"handleDescriptionEdit",function(){u.setState({editing:!0,editedBefore:!0})}),k(P(P(u)),"handleHashtagAddition",function(e){var t=u.props,n,r;(0,t.contextLog)(101,{component:208,element:10249,hashtags:e,objectId:t.pin.id});var o=u.state.flyoutCursorIndex,a=Number(o+u.state.hashtagQuery.length),i,c,l=u.state.description.slice(0,o)+e+" "+u.state.description.slice(a);u.updateDescription(l),u.setState({description:l,editing:!0,hashtagQuery:"",isHashtagFlyoutOpen:!1})}),k(P(P(u)),"handleRefTextArea",function(e){u._textArea=e}),u}return C(o,e),h(o,[{key:"render",value:function e(){var n=this,t=this.props,r=t.color,o=t.isFirstPin,a=t.pin,i=this.state,c=i.description,l=i.editing,s=i.flyoutOpened,u=i.hashtagQuery,d=i.isHashtagFlyoutOpen,f=a.images,p=a.link,b,h=f&&f["236x"],m=h&&h.url||a.image_base64;return y.a.createElement(g.b,{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",width:o?"50%":"",dangerouslySetInlineStyle:{__style:s&&l?{transform:"translateY(-75px)"}:{}}},y.a.createElement(g.b,{display:"flex",direction:"column",alignItems:"center"},a&&a.id&&y.a.createElement(v,{pin:a}),y.a.createElement(g.b,{paddingY:o?9:0,width:216},y.a.createElement(g.b,{maxHeight:s&&l?220:335,shape:"rounded",overflow:"hidden"},m?y.a.createElement(g.p,{alt:c,src:m,naturalHeight:h.height||1,naturalWidth:h.width||1}):!!p&&y.a.createElement(E.a,{color:r||"",description:c,url:p})),y.a.createElement(g.b,{marginTop:2,paddingX:2,id:T},y.a.createElement("div",{ref:function e(t){n.anchor=t}},y.a.createElement(_,{allowChange:!a.is_native,description:Object(w.a)(c),editing:l,hashtagFlyoutOpen:d,onHandleDescriptionBlur:this.handleDescriptionBlur,onHandleDescriptionEdit:this.handleDescriptionEdit,onRefTextArea:this.handleRefTextArea,onChange:this.onDescriptionChange,onCursorChange:this.onCursorChange}))))),this.anchor&&d?y.a.createElement(S.a,{addHashtag:this.handleHashtagAddition,anchor:this.anchor,editing:l,query:u}):null)}}]),o}(d.Component),F=t.a=Object(l.a)(A)},"2FON":function(e,t){},"8N7E":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("d6ZO"),r=n.n(o),a=n("W/Cr"),i=n("mu3h"),c=n("gEaE"),l=function e(t){var r=t.handlePinEditButtonClick;return o.createElement(c.o,{accessibilityLabel:a.a._("Edit","edit button on pin"),bgColor:"white",icon:"edit",iconColor:"darkGray",onClick:function e(t){var n=t.event;r(n)}})};t.default=Object(i.a)(l)},"8Zvv":function(e,t,n){"use strict";t.a=r,t.b=u;var o=n("+B8E");function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c="/i-h2.pinimg.com/",l="/i-h1.pinimg.com/",s="/i.pinimg.com/";function r(e,t){if(!e)return t;var n=new o.a(e,"web_fastly_http2_images"),r;return n.check("enabled_all")?r=c:n.check("control_all")&&(r=l),t&&r?t.replace(s,r):t}function u(e,t){if(!e)return t;var n=new o.a(e,"web_fastly_http2_images"),r;return n.check("enabled_all")?r=c:n.check("control_all")&&(r=l),r?t.map(function(e){return a({},e,{url:e.url.replace(s,r)})}):t}},AcTh:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var r=n("d6ZO"),o=n.n(r),a=n("IaRT"),i=n.n(a);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function d(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?h(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){function r(e,t){var n;return l(this,r),m(h(h(n=d(this,f(r).call(this,e,t)))),"handleChange",function(e){n.props.onChange&&n.props.onChange.call(h(h(n)),e.target.value,e.target.selectionStart),n.setState({value:e.target.value})}),m(h(h(n)),"updateCursor",function(e){n.props.onCursorChange&&n.props.onCursorChange(e.target.selectionStart)}),m(h(h(n)),"handleKeyUp",function(e){n.props.onKeyUp&&n.props.onKeyUp(e),n.updateCursor(e)}),m(h(h(n)),"handleKeyDown",function(e){n.props.onKeyDown&&n.props.onKeyDown(e)}),m(h(h(n)),"handleFocus",function(e){n.props.onFocus&&n.props.onFocus(e),n.updateCursor(e)}),m(h(h(n)),"handleBlur",function(e){n.props.onBlur&&n.props.onBlur(e)}),m(h(h(n)),"handleClick",function(e){n.props.onClick&&n.props.onClick(e),n.updateCursor(e)}),n.state={isFocused:n.props.focused||!1,value:n.props.value},n}return p(r,e),u(r,[{key:"componentDidMount",value:function e(){this.focusIfNeeded()}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){this.setState({isFocused:t.focused,value:t.value})}},{key:"componentDidUpdate",value:function e(){this.focusIfNeeded()}},{key:"focusIfNeeded",value:function e(){this.state.isFocused&&document.activeElement!==this._textArea&&this._textArea.focus()}},{key:"select",value:function e(){this._textArea.select()}},{key:"render",value:function e(){var n=this,t=this.props;return o.a.createElement("textarea",{className:t.className,cols:t.cols,disabled:t.disabled?"disabled":"",id:t.id,name:t.name,onBlur:this.handleBlur,onChange:this.handleChange,onClick:this.handleClick,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,placeholder:t.placeholder,ref:function e(t){n._textArea=t},rows:t.rows,style:t.style,value:this.state.value})}}]),r}(r.Component);y.defaultProps={validators:[]}},DNL0:function(e,t){},GDBS:function(e,t,n){"use strict";n.d(t,"a",function(){return g});var r=n("d6ZO"),s=n.n(r),i=n("RklN"),o=n.n(i),u=n("gEaE");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function f(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?m(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){function a(){var e,n;c(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return y(m(m(n=f(this,(e=p(a)).call.apply(e,[this].concat(r))))),"setSearchFieldRef",function(e){n.searchField||(n.searchField=e)}),y(m(m(n)),"setFocus",function(){if(n.searchField){var e=Object(i.findDOMNode)(n.searchField);if(e instanceof HTMLElement){var t=e.querySelector("input");t instanceof HTMLInputElement&&t.focus()}}}),n}return b(a,e),d(a,[{key:"componentDidMount",value:function e(){this.props.focused&&window.requestAnimationFrame(this.setFocus)}},{key:"componentDidUpdate",value:function e(t){!t.focused&&this.props.focused&&this.setFocus()}},{key:"render",value:function e(){var t=this.props,n=t.accessibilityLabel,r=t.id,o=t.onBlur,a=t.onChange,i=t.onFocus,c=t.placeholder,l=t.value;return s.a.createElement(u.D,{accessibilityLabel:n,id:r,onBlur:o,onChange:a,onFocus:i,placeholder:c,ref:this.setSearchFieldRef,value:l})}}]),a}(r.Component)},LzMI:function(e,t,n){"use strict";function r(e){return{type:"PIN_BETTER_SAVE",payload:e}}function o(e){return{type:"PIN_BETTER_SELECT_BOARD_OR_SECTION",payload:e}}function a(e){return{type:"POST_REPIN_MORE_IDEAS_UPSELL_SHOWN",payload:{boardId:e}}}t.a=r,t.b=o,t.c=a},MH3C:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a});var o=n("BAXv"),r=function e(t,n){if(!n)return t;var r=new RegExp(/http(s?):/);if(!r.test(t)){var o=r.exec(n),a;if(o&&o.length)t=o[0]+t}return t},a=function e(t){var n=50,r=o.a.MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION;return{clamped:50<t.length?t.slice(0,50).trim()+"…":t,full:t.length>r?t.slice(0,r):t}}},NyaW:function(e,t,n){"use strict";t.a=x;var r=n("d6ZO"),i=n.n(r),o=n("DUIN"),c=n("BAXv"),s=n("W/Cr"),a=n("i0Ug"),l=n("g5tP"),u=n("HLDn"),d=n("S+Qs"),f=n("MQ2h"),p=n.n(f),b=n("FrUj");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function m(e,t){if(null==e)return{};var n=y(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function y(e,t){if(null==e)return{};var n={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],0<=t.indexOf(o)||(n[o]=e[o]);return n}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),e}function E(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?C(e):t}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}function O(e,t){return(O=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(a){var e,t;return t=e=function(e){function o(){var e,l;g(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return j(C(C(l=E(this,(e=_(o)).call.apply(e,[this].concat(n))))),"state",{createBoardError:null,inputName:l.props.prefilledName||"",nameValidators:[Object(b.q)({message:s.a._("Don't forget to name your board!")}),Object(b.j)({max:c.a.MAX_CHARS_FOR_BOARD_TITLE})],nameValidatorErrors:[],privacy:l.props.isAdAccountOwner?c.a.BoardPrivacy.PUBLIC:c.a.BoardPrivacy.PROTECTED,saving:!1}),j(C(C(l)),"handleChangeName",function(e,t){var n=Object(b.t)(l.state.nameValidators,e);l.setState({inputName:e,nameValidatorErrors:n,createBoardError:null},function(){t&&l.handleCreate()})}),j(C(C(l)),"handleChangePrivacy",function(){var e=l.state.privacy===c.a.BoardPrivacy.SECRET?c.a.BoardPrivacy.PUBLIC:c.a.BoardPrivacy.SECRET;l.setState({privacy:e})}),j(C(C(l)),"handleCreate",function(){var e=l.state,t=e.inputName,n=e.privacy,r=l.props,o=r.createBoard,a=r.invalidateResource,i=r.onCreate,c={privacy:n,protected:!l.props.isAdAccountOwner,name:t};l.setState({saving:!0,createBoardError:null}),o(c).then(function(e){l.setState({saving:!1}),i(e)}).catch(function(e){var t=s.a._("Uh oh! Something went wrong.");if(e.message){var n=e.message,r=e.message_detail;t=r?"".concat(n," ").concat(r):n}else"string"==typeof e&&(t=e);l.setState({saving:!1,createBoardError:t})}),a(n)}),l}return w(o,e),S(o,[{key:"UNSAFE_componentWillReceiveProps",value:function e(t){t.prefilledName&&this.setState({inputName:t.prefilledName})}},{key:"render",value:function e(){var t=this.props,n=t.createBoard,r=t.invalidateResource,o=m(t,["createBoard","invalidateResource"]);return i.a.createElement(a,Object.assign({onChangeBoardName:this.handleChangeName,onChangeBoardPrivacy:this.handleChangePrivacy,onBoardCreate:this.handleCreate},o,this.state))}}]),o}(r.Component),j(e,"displayName","WithBoardCreatePane(".concat(a.displayName||a.name,")")),t}function k(e,t){var n=e.advertiser,r=e.viewer;return r.isAuth&&n?{isAdAccountOwner:n.owner_user_id===r.id}:{isAdAccountOwner:r.isAuth}}function T(n,r){return{invalidateResource:function e(t){n(Object(d.f)("BoardsResource",Object(u.a)(r.viewer.username,t===c.a.BoardPrivacy.SECRET)))},createBoard:function e(t){return n(Object(l.f)(t))}}}function x(e){return Object(f.compose)(a.a,Object(o.connect)(k,T),P)(e)}},QuPB:function(e,t,n){"use strict";t.a=l;var o=n("d6ZO"),r=n.n(o),a=n("BAXv"),i=n("FJZF"),c=n("gEaE");function l(e){var t=e.url,n=e.description,r=e.color;return r=r||a.a.DEFAULT_IMAGELESS_PIN_COLOR,o.createElement(c.b,{shape:"rounded",height:216,width:"100%",dangerouslySetInlineStyle:{__style:{background:r}}},o.createElement(c.b,{maxHeight:200,padding:4,overflow:"hidden"},t&&o.createElement(c.b,{marginBottom:2},o.createElement(c.K,{color:"white",size:"xs"},i.a.parse(t).hostname||t)),o.createElement(c.b,{maxHeight:144},o.createElement(c.K,{bold:!0,color:"white",overflow:"normal",size:"lg"},n))))}},"Td/c":function(e,t,n){"use strict";var u=n("d6ZO"),r=n.n(u),o=n("DUIN"),i=n("BAXv"),c=n("HEYN"),d=n("W/Cr"),f=n("XSNT"),p=n("hkVh"),a=n("kxCB"),l=n("MQ2h"),s=n.n(l),b=n("gEaE");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){C(t,e,n[e])})}return t}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),e}function S(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?O(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}function w(e,t){return(w=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=function(e){function t(e){var a;return y(this,t),C(O(O(a=S(this,E(t).call(this,e)))),"onCreateSection",function(){var e=a.props,t=e.board,n=e.dispatch,r=e.completeCreateSectionAction,o=e.pinImport;return a.setState({isSaving:!0}),n(Object(c.a)({boardId:t.id,name:a.state.inputName.trim(),pinImport:o})).then(function(e){a.setState({isSaving:!1,newSection:e}),r(e)}).catch(function(e){a.setState({createError:e.message,isSaving:!1})})}),C(O(O(a)),"handleKeyDown",function(e){var t=a.state,n=t.createError,r=t.inputName;[i.a.KeyCode.ENTER,i.a.KeyCode.NUMPAD_ENTER].includes(e.which)&&!n&&r.trim()&&a.onCreateSection()}),C(O(O(a)),"handleChangeName",function(e){a.setState({createError:null,inputName:e})}),C(O(O(a)),"handleInputRef",function(e){a.setState({inputRef:e})}),a.state={createError:null,inputName:e.initialName||"",inputRef:null,newSection:null,isSaving:!1},a}return _(t,e),v(t,[{key:"componentDidUpdate",value:function e(t,n){var r=this.state,o=r.createError,a=r.inputRef;!a||n.inputRef&&!o||a.focus()}},{key:"render",value:function e(){var t=this.props,n=t.onClearModal,r=t.showTitle,o=t.positionRelative,a=this.state,i=a.createError,c=a.inputName,l=a.isSaving,s=!!c.trim()&&!i;return u.createElement(b.b,{xs:{display:"flexColumn"},color:"white",flex:"grow",top:!0,bottom:!0,right:!0,position:o?"relative":"absolute",shape:"rounded",width:"100%",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}}},r&&u.createElement(b.b,{marginTop:3,paddingX:6,paddingY:3},u.createElement(b.K,{size:"xl",bold:!0},d.a._("Add section","Title in the add section modal"))),u.createElement(b.b,{padding:3},u.createElement(b.b,{marginBottom:2},u.createElement(b.q,{htmlFor:"sectionEditName"},u.createElement(b.K,{size:"sm",color:i?"red":"gray"},d.a._("Name","Board section name")))),u.createElement(b.b,null,u.createElement(f.a,{className:"boardCreateInput".concat(i?" error":""),id:"sectionEditName",name:"sectionName",onChange:this.handleChangeName,onKeyDown:this.handleKeyDown,placeholder:d.a._('Like "Lighting"',"Placeholder for board section name"),ref:this.handleInputRef,type:"text",value:c,style:m({border:"none",outline:"none",fontSize:15,marginBottom:5,padding:6,width:"95%",color:"#333"},i?{background:"#e6abad",border:"1px solid #e60023",borderRadius:3}:{})}))),u.createElement(b.j,null),u.createElement(b.b,{display:"flex",flex:"grow"}),u.createElement(b.j,null),u.createElement(b.b,{padding:6},i&&u.createElement(b.b,{marginBottom:3},u.createElement(b.K,{align:"center",bold:!0,color:"red",size:"sm"},i)),u.createElement(b.b,{display:"flex",justifyContent:"between"},u.createElement(b.c,{onClick:n,text:d.a._("Cancel","cancel section add"),inline:!0}),u.createElement(p.a,{disabled:!s||l,onClick:this.onCreateSection,submitting:l,text:d.a._("Add","add a new section")}))))}}]),t}(u.Component);t.a=Object(l.compose)(Object(o.connect)(),a.a)(j)},WxTF:function(e,t,n){"use strict";var u=n("d6ZO"),a=n.n(u),d=n("W/Cr"),i=n("XSNT"),r=n("IaRT"),o=n.n(r),c=n("skut"),l=n("pN+K"),f=n("5tOk"),p=n("gEaE");function b(e){var t=e.body,n=e.img,r=e.onClick,o=e.selected,a=e.title,i=e.username,c=e.valid,l=i||t,s=function e(t,n){if(i)return t?u.createElement(p.n,{icon:"check-circle",color:"red",accessibilityLabel:d.a._("Confirmation an invite will be sent","Alt tags on a check box on the board create flow for board invites"),size:32}):u.createElement(p.b,{height:32,width:32,shape:"circle",dangerouslySetInlineStyle:{__style:{border:"solid 1px #B5B5B5"}}});var r={text:d.a._("Sent","Sent a board collaborator invite"),color:"gray",size:"sm",disabled:!0,inline:!0};return t||(r.text=d.a._("Invite","Add board collaborator invite"),r.disabled=Boolean(!n)),u.createElement(p.c,r)};return u.createElement(p.b,{marginBottom:4},u.createElement(p.P,{onTouch:r},u.createElement(p.b,{display:"flex",justifyContent:"between",width:"100%"},u.createElement(p.b,{display:"flex"},n,u.createElement(p.b,{marginLeft:3,display:"flex",direction:"column"},u.createElement(p.b,{marginBottom:1},u.createElement(p.K,{bold:!0,size:"md",truncate:!0},a)),u.createElement(p.K,{size:"xs",truncate:!0},l))),s(o,c))))}function s(t,e,n){if("user_share_suggestion"===t.type||"user"===t.type){var r=u.createElement(p.a,{name:t.title||t.full_name,src:t.image_medium_url,size:"md"});return u.createElement(b,{img:r,onClick:function e(){return n(t)},selected:e,title:t.full_name,username:t.username})}if("email"===t.type){var o=t.id,a=t.valid,i=u.createElement(p.b,{shape:"circle",color:"lightGray",height:40,width:40,display:"flex",justifyContent:"center",alignItems:"center"},u.createElement(p.n,{color:"darkGray",icon:"envelope",size:20,accessibilityLabel:d.a._("Email icon","Email icon on board create modal")})),c=Object(f.c)(d.a._("Email {{ email }}"),{email:o}),l,s;return s=e?(l=d.a._("Done!","Text that lets the user know we sent the board invite email"),function e(){}):(l=a?d.a._("Click to send!","Text that lets the user know they can successfully send a board invite email"):d.a._("Keep typing!","Text that lets a user know the email they are typing is not valid yet"),function e(){return a?n(t):void 0}),u.createElement(b,{body:l,img:i,onClick:s,selected:e,title:c,valid:a})}}var h=n("T0l7");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),e}function S(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?O(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}function w(e,t){return(w=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t,n){var r=e.id;return t===n.findIndex(function(e){return e.id===r})}var P=function(e){function o(){var e,i;y(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return C(O(O(i=S(this,(e=E(o)).call.apply(e,[this].concat(n))))),"state",{selectedCollaborators:[],showSocialConnectPanel:!1,typeaheadSuggestions:[],value:""}),C(O(O(i)),"handleTextFieldChange",function(e){i.setState({value:e})}),C(O(O(i)),"handleCollaboratorClick",function(e){var t=e.id,n=e.type;i.isIdSelected[t]=!i.isIdSelected[t];var r,o=i.state.selectedCollaborators.concat([e]),a="email"===n?h.c:h.d;i.props.onSelectedCollaboratorsChange({id:t,resource:a}),i.setState({selectedCollaborators:o})}),C(O(O(i)),"handleTypeaheadSuggestionsChange",function(e){i.setState({typeaheadSuggestions:e})}),C(O(O(i)),"isIdSelected",{}),i}return _(o,e),v(o,[{key:"render",value:function e(){var n=this,t=this.state.value,r,o=(""===t?this.props.shareSuggestions:this.state.selectedCollaborators.concat(this.state.typeaheadSuggestions).concat({type:"email",id:t,valid:Object(f.g)(t)}).concat(this.props.shareSuggestions).filter(j)).map(function(e,t){return s(e,n.isIdSelected[e.id],n.handleCollaboratorClick)}).map(function(e,t){return a.a.createElement("li",{key:t},e)});return a.a.createElement(p.b,{display:"flex",direction:"column",height:"100%"},a.a.createElement(p.b,{paddingX:3,marginBottom:4,marginTop:3},a.a.createElement(p.K,{size:"md"},d.a._("Add collaborators (optional)","Optional field to add collaborators to a board on board create"))),a.a.createElement(p.b,{paddingX:3,marginBottom:4,width:"100%"},a.a.createElement(p.b,{dangerouslySetInlineStyle:{__style:{borderRadius:"4px"}},color:"lightGray",flex:"grow",display:"flex",alignItems:"center",height:40,position:"relative"},a.a.createElement(p.b,{paddingX:4,height:"100%",position:"absolute",top:!0,left:!0,display:"flex",alignItems:"center"},a.a.createElement(p.n,{accessibilityLabel:"",icon:"search",size:20})),a.a.createElement(c.a,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",value:t},a.a.createElement(i.a,{className:"SearchBoxInput",onChange:this.handleTextFieldChange,placeholder:d.a._("Search by name or email"),value:t})))),a.a.createElement(p.b,{paddingX:3,overflow:"scrollY"},a.a.createElement("ul",null,o)))}}]),o}(u.Component);C(P,"defaultProps",{shareSuggestions:[]});var k=t.a=Object(l.b)({name:"ShareSuggestionsResource",key:"shareSuggestions"},{allowStale:!1})(P)},jnRL:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function e(t,n){return{type:"MOST_RECENT_BOARD",payload:{id:t,name:n}}},o=void 0},m1HD:function(e,t,n){"use strict";n.d(t,"b",function(){return C});var i=n("d6ZO"),r=n.n(i),o=n("DUIN"),c=n("W/Cr"),l=n("FTnl"),a=n("MQ2h"),s=n.n(a),u=n("suNN"),d=n("LzMI"),f=n("+B8E"),p=n("Kqaz");function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}function g(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?_(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}function E(e,t){return(E=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=5e3,C=function e(t){var n=t.boardId,r=t.boardUrl,o=t.postRepinMoreIdeasUpsell,a=t.requestContext;if(!r)return!1;var i=o.recentSaves,c;if(o.recentUpsell[n])return!1;var l=i.findIndex(function(e){return e.boardId!==n}),s;return 3<=(-1===l?i.length:l)+1&&new f.c(a,"web_use_cases_new_ideas_post_repin_upsell2").enabled()},j=function(e){function a(){var e,r;h(this,a);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return w(_(_(r=g(this,(e=v(a)).call.apply(e,[this].concat(n))))),"handleClick",function(){var e=r.props,t=e.boardId,n;(0,e.contextLog)(101,{component:20,element:10805,objectId:t})}),r}return S(a,e),y(a,[{key:"componentDidMount",value:function e(){var t;(0,this.props.toastShown)()}},{key:"render",value:function e(){var t=this.props,n=t.boardName,r=t.boardUrl,o=t.onHide;return i.createElement(l.a,{duration:O,onHide:o,text:Object(u.b)(c.a._("Find more ideas for {{ boardName }}"),{boardName:n}).join(""),href:"".concat(r,"more_ideas/?ideas_referrer=").concat(this.referrerType),onClick:this.handleClick})}},{key:"referrerType",get:function e(){return this.props.isRepin?16:15}}]),a}(i.PureComponent);t.a=Object(a.compose)(Object(o.connect)(null,function(t,n){return{toastShown:function e(){return t(Object(d.c)(n.boardId))}}}),p.a)(j)},mSxZU:function(e,t,n){"use strict";var i=n("d6ZO"),g=n.n(i),r=n("DUIN"),y=n("vBru"),v=n("wUWH"),p=n("HcmU"),b=n("DKBQ"),a=n("0XFc"),S=n("biwq"),E=n("W/Cr"),_=n("R6a3"),c=n("m1HD");function h(e){return{type:"PIN_CREATED_VIA_CREATOR_CHECKLIST",payload:{pin_created_via_creator_checklist:e}}}var w=n("1Xwf");function m(e,t){return{type:"PIN_SAVE",payload:{pinId:e,saved:t}}}var l=n("UVpX"),s=n("Svvu"),u=n("EAiy"),o=n("pN+K"),d=n("MQ2h"),f=n.n(d),O=n("gEaE");function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return t&&P(e.prototype,t),n&&P(e,n),e}function T(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?R(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function I(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}function B(e,t){return(B=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=function(e){function a(){var e,n;j(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return L(R(R(n=T(this,(e=x(a)).call.apply(e,[this].concat(r))))),"state",{isFacebookChecked:n.props.resourceLoaded&&!!n.props.userSocial&&n.props.userSocial.facebook_publish_stream_enabled,isTwitterChecked:n.props.resourceLoaded&&!!n.props.userSocial&&n.props.userSocial.twitter_publish_enabled}),L(R(R(n)),"handleTwitterCheckboxChanged",function(){var e=!n.state.isTwitterChecked;n.setState({isTwitterChecked:e}),n.props.onSocialConnect(s.default.TWITTER,e)}),L(R(R(n)),"handleFacebookCheckboxChanged",function(){var t=!n.state.isFacebookChecked;t?l.a.maybeRequestFbTimelinePermission({success:function e(){n.setState({isFacebookChecked:!0}),u.a.set("facebook_publish_stream_enabled",t),n.props.onSocialConnect(s.default.FACEBOOK,t)},error:function e(){n.setState({isFacebookChecked:!1}),u.a.set("facebook_publish_stream_enabled",!1),n.props.onSocialConnect(s.default.FACEBOOK,t)}}):(n.setState({isFacebookChecked:!1}),u.a.set("facebook_publish_stream_enabled",!1),n.props.onSocialConnect(s.default.FACEBOOK,t))}),L(R(R(n)),"renderFacebookShare",function(){return i.createElement(O.b,{display:"flex",alignItems:"center",marginLeft:2},i.createElement(O.e,{checked:n.state.isFacebookChecked,id:"share_facebook",onChange:n.handleFacebookCheckboxChanged,size:"sm"}),i.createElement(O.q,{htmlFor:"share_facebook"},i.createElement(O.b,{marginLeft:2},i.createElement(O.K,null,E.a._("Post to Facebook")))))}),L(R(R(n)),"renderTwitterShare",function(){return i.createElement(O.b,{display:"flex",alignItems:"center",marginLeft:5},i.createElement(O.e,{checked:n.state.isTwitterChecked,id:"share_twitter",onChange:n.handleTwitterCheckboxChanged,size:"sm"}),i.createElement(O.q,{htmlFor:"share_twitter"},i.createElement(O.b,{marginLeft:2},i.createElement(O.K,null,E.a._("Post to Twitter")))))}),n}return I(a,e),k(a,[{key:"UNSAFE_componentWillReceiveProps",value:function e(t){var n=t.resourceLoaded,r=t.userSocial;n&&r&&this.setState({isFacebookChecked:!!r.facebook_publish_stream_enabled,isTwitterChecked:!!r.twitter_publish_enabled})}},{key:"render",value:function e(){var t=this.props,n=t.resourceLoaded,r=t.userSocial;if(!n||!r)return null;var o=r.facebook_url,a=r.twitter_url;return!(!o&&!a)&&i.createElement(O.b,{display:"flex",padding:2},o&&this.renderFacebookShare(),a&&this.renderTwitterShare())}}]),a}(i.Component),F=Object(d.compose)(Object(r.connect)(function(e){var t=e.viewer;return{userId:t.isAuth?t.id:""}}),Object(o.b)({name:"UserResource",key:"userSocial",options:function e(t){return{user_id:t.userId,field_set_key:"social_connect"}}}))(A),N=n("Cjb7"),M=n("ZtCB"),D=n.n(M),H=n("DNL0"),U=n.n(H),K=n("6oHq"),z=n("sYje"),W=n("JqyP");function q(e){var t,n,r="-7 -7 30 30",o;switch(e.name){case"facebook":o=i.createElement("circle",{cx:"8",cy:"8",r:"15",fill:"#3B5998"}),n=i.createElement("path",{fill:"#fff",d:"M9.267 16V8.702h2.506l.376-2.845H9.267V4.041c0-.823.234-1.384 1.442-1.384l1.541-.001V.112A21.09 21.09 0 0 0 10.005 0C7.783 0 6.262 1.325 6.262 3.76v2.097H3.75v2.845h2.512V16h3.005z"});break;case"messenger":o=i.createElement("circle",{cx:"8",cy:"8",r:"15",fill:"#1DA1F2"}),n=i.createElement("path",{fill:"#fff",d:"M8 0C3.582 0 0 3.316 0 7.407c0 2.332 1.163 4.41 2.981 5.769V16l2.724-1.495c.727.201 1.497.31 2.295.31 4.418 0 8-3.317 8-7.408C16 3.317 12.418 0 8 0zm.795 9.975L6.758 7.802 2.783 9.975l4.372-4.642 2.087 2.173 3.926-2.173-4.373 4.642z"});break;case"pinterest":r="0 0 16 16",n=i.createElement("path",{fill:"#e60023",d:"M5.644 15.648A8.01 8.01 0 0 0 8 16a8 8 0 1 0-2.847-.521c-.073-.625-.151-1.655.017-2.378.145-.621.934-3.958.934 -3.958s-.238-.477-.238-1.183c0-1.107.642-1.934 1.44-1.934.68 0 1.008.51 1.008 1.122 0 .683-.435 1.705-.66 2.652-.187.792.398 1.439 1.18 1.439 1.416 0 2.504-1.493 2.504-3.647 0-1.907-1.37-3.24-3.327 -3.24-2.266 0-3.596 1.7-3.596 3.456 0 .684.264 1.418.593 1.817a.238.238 0 0 1 .055.229c-.06.252-.195.792-.221.903-.035.146-.116.177-.267.107C3.581 10.4 2.96 8.946 2.96 7.778c0-2.512 1.825-4.82 5.262-4.82 2.763 0 4.91 1.97 4.91 4.6 0 2.745-1.73 4.954-4.133 4.954-.807 0-1.566-.42-1.825-.914 0 0-.4 1.52-.496 1.893-.188.722-.71 1.637-1.033 2.157z"});break;case"link":o=i.createElement("circle",{cx:"8",cy:"8",r:"15",fill:"#EFEFEF"}),n=i.createElement("path",{fill:"#8e8e8e",d:"M6.555 7.236L4.848 8.943l-2.389 2.39 2.21 2.21 2.39-2.39 1.707-1.707.82.821a.92.92 0 0 1 .006 1.301l-4.166 4.167a.926.926 0 0 1-1.302-.005L.272 11.878a.92.92 0 0 1-.005-1.302L4.433 6.41a.924.924 0 0 1 1.302.005l.82.821zM9.45 8.764l1.707-1.707 2.389-2.389-2.21-2.211-2.39 2.389-1.707 1.707-.82-.82a.921.921 0 0 1-.006-1.302L10.578.265a.924.924 0 1 1.301.006l3.853 3.852a.92.92 0 0 1 .004 1.301l-4.165 4.167a.924.924 0 0 1-1.302-.006l-.82-.82zm-4.573.889l4.779-4.78 1.473 1.474-4.779 4.78-1.473-1.474z"});break;default:n=null}return i.createElement("svg",{width:"36",height:"36",viewBox:r},o,n)}var Q=n("8e8Q");function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t,n){return t&&Y(e.prototype,t),n&&Y(e,n),e}function V(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?te(e):t}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function $(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}function ee(e,t){return(ee=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var re=function(e){function o(){var e,c;G(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ne(te(te(c=V(this,(e=J(o)).call.apply(e,[this].concat(n))))),"state",{showShareLink:!1,pinterestProfileLink:"",fb:null}),ne(te(te(c)),"selectText",function(e){e.target.select()}),ne(te(te(c)),"openSocialDialog",function(e,t){var n=c.props,r=n.handleShare,o=n.dismissModal,a=n.experienceComplete,i;switch(e){case"facebook":K.default.logIn(c.state.fb,function(){z.a.shareFacebookInvite(c.getShareOptions(5))});break;case"messenger":K.default.logIn(c.state.fb,function(){z.a.shareFbMessengerInvite(c.getShareOptions(6))});break;case"link":i=c.getShareOptions(12),z.a.createAndLogShareInvite(i).then(function(e){var t=e.invite_url;t?c.setState({pinterestProfileLink:t,showShareLink:!0}):r&&r()});break;default:r&&r()}"link"!==e&&(a&&a(),o(!0))}),ne(te(te(c)),"handleShareLinkDismiss",function(e){c.setState({showShareLink:!1})}),ne(te(te(c)),"handleFacebookClick",function(e){c.openSocialDialog("facebook",e)}),ne(te(te(c)),"handleMessengerClick",function(e){c.openSocialDialog("messenger",e)}),ne(te(te(c)),"handlePinterestClick",function(e){c.openSocialDialog("pinterest",e)}),ne(te(te(c)),"handleLinkClick",function(e){c.openSocialDialog("link",e)}),c}return $(o,e),Z(o,[{key:"componentDidMount",value:function e(){var t=this;K.default.ensureInit(function(e){return t.setState({fb:e})})}},{key:"getShareOptions",value:function e(t){var n=this.props.pin;return{invite_channel:t,object_type:Q.a.PIN,object_id:n.id,name:"",description:n.description||"",path:"/pin/".concat(n.id,"/"),picture:n.images&&n.images["236x"]&&n.images["236x"].url||""}}},{key:"render",value:function e(){var t=this.props.close,n=this.state,r=n.pinterestProfileLink,i=n.showShareLink,c=g.a.createElement(W.a,{link:r,handleClick:this.handleShareLinkDismiss,handleFocus:this.selectText}),o=function e(t,n,r){var o="share-upsell-label-"+t,a="";return"facebook"===t?a="#3b5998":"messenger"===t&&(a="#1da1f2"),"link"===t&&i?c:g.a.createElement(O.P,{onTouch:function e(t){var n=t.event;return r(n)},fullWidth:!1},g.a.createElement(O.b,{display:"flex",paddingY:2,alignItems:"center"},g.a.createElement(q,{name:t}),g.a.createElement(O.h,{xs:1}),g.a.createElement("div",{id:o},g.a.createElement(O.K,{size:"xl",bold:!0},g.a.createElement("span",{style:{color:a}},n)))))},a;return g.a.createElement(O.b,{display:"flex",alignItems:"center",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}}},g.a.createElement("div",null,g.a.createElement(O.b,{paddingX:6,flex:"none"},g.a.createElement(O.b,{position:"absolute",dangerouslySetInlineStyle:{__style:{top:16,right:16}}},g.a.createElement(O.o,{icon:"cancel",onClick:t,accessibilityLabel:E.a._("Cancel"),size:"sm"})),g.a.createElement(O.m,{size:"md"},E.a._("Saved!","Save pin to board")),g.a.createElement(O.b,{paddingY:3,marginRight:8},g.a.createElement(O.K,{size:"xl"},E.a._("Know someone who might like it?","Upsell share a recently saved pin to board"))),g.a.createElement(O.b,{paddingY:2,flex:"none"},o("facebook",E.a._("Send on Facebook"),this.handleFacebookClick),o("messenger",E.a._("Send on Messenger"),this.handleMessengerClick),o("pinterest",E.a._("Send on Pinterest"),this.handlePinterestClick),o("link",E.a._("Send a link"),this.handleLinkClick)))),g.a.createElement(O.h,{xs:1}))}}]),o}(i.Component),oe=n("FTnl"),ae=n("MSpZ"),ie=n("kxCB"),ce=n("EfF6"),le=n("5tOk"),se=n("MH3C"),ue=n("Kqaz"),de=n("4Gri"),fe=n("g5tP");function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function be(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){we(t,e,n[e])})}return t}function he(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t,n){return t&&me(e.prototype,t),n&&me(e,n),e}function ge(e,t){return!t||"object"!==pe(t)&&"function"!=typeof t?_e(e):t}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Se(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}function Ee(e,t){return(Ee=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function _e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return Ce}),n.d(t,"d",function(){return Ie}),t.b=Le,t.c=Fe;var Oe=/#[^(\-\\.\s#,\/$%\^&\*;:{}=\`~()\[\]@|<>…)]+/gi,Ce=4e3,je=660,Pe=540,ke="236x",Te="PinPanePinMeta",xe=236,Ie={LOADING:"loading",SUCCESS:"success"},Be=function(e){function o(){var e,y;he(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return we(_e(_e(y=ge(this,(e=ve(o)).call.apply(e,[this].concat(n))))),"state",{pinDescription:y.props.pin&&y.props.pin.description||"",showSharingUpsell:!1,resolve:void 0,experienceComplete:function e(){},experienceDismiss:function e(){},newPin:null,boardSavedTo:null,height:0,sharing:{facebook:!1,twitter:!1},modalTitle:y.props.showCreate?E.a._("Create board"):E.a._("Choose board")}),we(_e(_e(y)),"setModalTitle",function(e){return y.safeSetState({modalTitle:e})}),we(_e(_e(y)),"setPWTSaveRequestTiming",function(e,t){e?(y.setPWTAbort(),ae.a.sendEvent(new de.I)):t&&ae.a.sendEvent(new de.J({result:t}))}),we(_e(_e(y)),"getPinHeight",function(){var e,t=(y.props.pin.images["236x"]||{}).height||0,n=document.getElementById(Te);return n&&t?n.clientHeight+t:0}),we(_e(_e(y)),"unmounted",!1),we(_e(_e(y)),"safeSetState",function(e,t){y.unmounted?t&&t():y.setState(e,t)}),we(_e(_e(y)),"scrollToRelatedPins",function(){document&&document.documentElement&&"scrollBehavior"in document.documentElement.style?window.scroll({top:y.state.height,left:0,behavior:"smooth"}):window.scrollTo(0,y.state.height)}),we(_e(_e(y)),"handleBoardSaveSuccess",function(o,e,a){var t=y.props,i=t.action,c=t.dispatch,n=t.pin,r=t.setCompletionPromise;p.default.instance.refreshPlacedExperiences(),y.setPWTSaveRequestTiming(!1,1);var l=p.default.instance.getPlacedExperience(33),s=p.default.instance.getPlacedExperience(11),u;if(r(y._makeCancelablePromise(new Promise(function(e,t){var n=o.resource_response.data;y._triggerPubSubs(n);var r=y.state.pinDescription.match(Oe)||[];0<r.length&&y.props.contextLog(2,{element:10273,hashtags:JSON.stringify(r),objectId:y.props.pin.id}),"repin"===i?(y._fetchBoardRecommendation(n).then(function(e){y._showSuccessToast(e,n,a)}),l&&500388===l.experience_id?y.safeSetState({showSharingUpsell:!0,newPin:n,resolve:e}):e(n)):("create"===i&&s&&500840===s.experience_id&&(c(h(!0)),y.props.contextLog(7510,{component:13233})),e(n))}))),c(Object(fe.c)(e)),c(Object(ce.d)({boardId:e.id,sectionId:a&&a.id,increment:1})),a||!e.image_cover_url){var d=n.image_url,f=n.images;e.image_cover_url=d||f[ke]&&f[ke].url||"",c(Object(fe.e)({},e))}a&&c(Object(b.a)(a.id)),c(m(n.id,!0))}),we(_e(_e(y)),"_adjustHeightToPin",function(){0===y.state.height&&(y.safeSetState({height:je}),y.props.onHeightChange&&y.props.onHeightChange(je))}),we(_e(_e(y)),"close",function(){var e=y.props,t=e.contextLog,n=e.onClose;y.experienceDismiss&&y.experienceDismiss(),n&&(y.setPWTAbort(),n(),t(2502,{component:5,element:610}))}),we(_e(_e(y)),"handleSaveToBoard",function(n,t){if(!y.state.boardSavedTo){var e=y.props,r=e.shouldShowPostCreateUpsellToast,o=e.showToast;y.setPWTSaveRequestTiming(!0);var a="secret"===(n.privacy||""),i={board:t?t.id:n.id,state:Ie.LOADING};y.safeSetState({boardSavedTo:i},function(){var e;y._getPinResource(a,n.id,(t||{}).id).callCreate({showError:!0}).then(function(e){y.safeSetState({boardSavedTo:Object.assign(i,{state:Ie.SUCCESS})},function(){return y.handleBoardSaveSuccess(e,n,t)}),r&&o(function(e){var t=e.onHide;return g.a.createElement(c.a,{boardId:n.id,boardName:n.name,boardUrl:n.url,isRepin:!1,onHide:t})})}).catch(function(e){y.unmounted||y.safeSetState({boardSavedTo:null}),y.setPWTSaveRequestTiming(!1,3);var t=y._makeCancelablePromise(Promise.reject(e));y.props.setCompletionPromise(t)})})}}),we(_e(_e(y)),"handleSocialConnectSet",function(e,t){var n=Object.assign({},y.state.sharing);e===s.default.FACEBOOK?n.facebook=t:e===s.default.TWITTER&&(n.twitter=t),y.safeSetState({sharing:n})}),we(_e(_e(y)),"updateDescription",function(e){y.safeSetState({pinDescription:e})}),we(_e(_e(y)),"handleLogToastClick",function(){y.props.contextLog(101,{component:20,view:52})}),we(_e(_e(y)),"_makeCancelablePromise",function(e){var r=!1,t;return{promise:new Promise(function(t,n){e.then(function(e){return r?n({isCanceled:!0}):t(e)}),e.catch(function(e){return n(r?{isCanceled:!0}:e)})}),cancel:function e(){r=!0}}}),we(_e(_e(y)),"_getPinResource",function(e,t,n){var r=y.props,o=r.color,a=r.location,i=r.pin,c=r.method,l=r.guid,s=r.additionalCreateFields,u;i.id&&(u=Object(S.a)(i,a)||"".concat(i.tracking_params,"~0"));var d=i.id?"RepinResource":"PinResource",f=!i.id&&i.image_url?Object(se.b)(i.image_url,i.link):"",p=be({},s,{board_id:t||"",color:o||"",clientTrackingParams:u,description:y.state.pinDescription,guid:l||"",link:i.link,image_base64:i.image_base64,image_url:f,is_buyable_pin:!1,is_removable:i.promoted_is_removable,media_upload_id:i.media_upload_id,method:c||"",pin_id:i.id||"",section:n,title:i.title||""});if(!e){var b=y.state.sharing,h=b.facebook,m=b.twitter;p.share_facebook=h,p.share_twitter=m}return D.a.create(d,p)}),we(_e(_e(y)),"_triggerPubSubs",function(e){N.a.instance.publish("currentUser","pinCreated",e),N.a.instance.publish(e.board.id,"pinCreated",{pin:e}),"repin"===y.props.action&&(N.a.instance.publish(e.board.id,"pinRepinned",e),N.a.instance.publish(y.props.pin.id,"pinRepinned",e))}),we(_e(_e(y)),"_showSuccessToast",function(e,t,n){var r=y.props,o=r.hideAllToasts,a=r.showSuccessToast,i=r.showToast;if(a&&!y.state.showSharingUpsell){o();var c=t.board,l=c.image_cover_url,s=c.name,u=c.url,d;if(d=n?[Object(le.c)(E.a._("Saved to {{sectionName}} in {{boardName}}","Toast for successfully saving to a section within a board"),{sectionName:n.title,boardName:s})]:[E.a._("Saved to"),s],i(function(e){var t=e.onHide;return g.a.createElement(oe.a,{duration:Ce,onHide:t,text:d,href:n?"".concat(u).concat(n.slug):u,imageUrl:l,onClick:y.handleLogToastClick})}),e){var f=e.name,p=e.url,b=e.image_thumbnail_url;i(function(e){var t=e.onHide;return g.a.createElement(oe.a,{duration:Ce,onHide:t,text:[E.a._("You might also like","Post repin suggested board"),f],href:p,imageUrl:b,onClick:y.handleLogToastClick})})}}}),we(_e(_e(y)),"_fetchBoardRecommendation",function(e){var t;return D.a.create("RelatedBoardForPinRandomFeedResource",{pin:e.id,page_size:1}).callGet({showError:!1}).then(function(e){return Promise.resolve(e.resource_response.error?null:e.resource_response.data[0])})}),we(_e(_e(y)),"dismissModal",function(e){var t=y.state,n=t.resolve,r=t.newPin;y.experienceDismiss&&!e&&y.experienceDismiss(),n&&n(r)}),y}return Se(o,e),ye(o,[{key:"componentDidMount",value:function e(){this._adjustHeightToPin()}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){this.safeSetState({pinDescription:t.pin&&t.pin.description||t.description||""})}},{key:"componentDidUpdate",value:function e(){this._adjustHeightToPin()}},{key:"componentWillUnmount",value:function e(){this.unmounted=!0}},{key:"setPWTAbort",value:function e(){ae.a.sendEvent(new de.f({result:{COMPLETE:1,USER_ABORT:2,RESPONSE_ERROR:3,RESPONSE_TIMEOUT:4,NETWORK_ERROR:5,CLIENT_SOFTWARE_ERROR:6,OTHER:7,NAVIGATE_AWAY:8,EXIT_APP:9,BACKGROUND_APP:10,COMPLETE_WITHOUT_CONTENT:11}.ABORTED}))}},{key:"renderFlyoutBoardCreate",value:function e(){var t=this.props,n=t.anchorRef,r=t.pin,o=t.isCloseupPin;return g.a.createElement(a.a,{anchorRef:n,dismissHandler:this.close,shownWithinMasonry:!o,saving:!(!this.state.boardSavedTo||this.state.boardSavedTo.state!==Ie.SUCCESS),image:r.images.orig,name:"",onCancel:this.close,onCreate:this.handleSaveToBoard,pinId:r.id})}},{key:"render",value:function e(){var o=this;if(!this.props.pin&&!this.props.resourceLoaded)return null;var t=this.props,n=t.color,a=t.pin,r=t.isInModal,i=t.onCloseAndShare,c=t.showCreate,l=t.showFlyout,s=t.suggestedBoardTitle,u=this.state,d=u.showSharingUpsell,f=u.boardSavedTo,p,b,h=u.height||660;if(l)return this.renderFlyoutBoardCreate();var m=g.a.createElement(O.b,{position:"relative",height:h,width:"100%",display:"flex",justifyContent:"center"},g.a.createElement(O.b,{color:"white",display:"flex",height:"100%",overflow:"hidden",position:"relative",shape:"rounded",width:"100%"},g.a.createElement(O.b,{width:"40%",direction:"column",display:"flex",justifyContent:"between",dangerouslySetInlineStyle:{__style:{borderRight:"1px solid #f5f5f5"}}},g.a.createElement(O.b,{display:"flex",flex:"grow",alignItems:"center",justifyContent:"start",direction:"column",marginTop:3},g.a.createElement(w.a,{color:n,pin:a,updateDescription:this.updateDescription})),g.a.createElement(F,{onSocialConnect:this.handleSocialConnectSet})),d?g.a.createElement(v.a,{placementId:33,experienceIds:[500388]},function(e){var t=e.complete,n=e.dismiss,r=e.display_data;return o.experienceComplete=t,o.experienceDismiss=n,g.a.createElement(re,{handleShare:i,close:o.close,experienceComplete:t,pin:a,dismissModal:o.dismissModal})}):g.a.createElement(O.b,{display:"flex",width:"60%"},g.a.createElement(y.a,{boardSavedTo:f,isRepin:!0,onBoardSave:this.handleSaveToBoard,onClose:this.close,pinId:a.id,showCreate:c,suggestedBoardTitle:s,setModalTitle:r?this.setModalTitle:void 0}))));return r?g.a.createElement(_.a,{accessibilityCloseLabel:E.a._("Close"),accessibilityModalLabel:this.state.modalTitle,onDismiss:this.close,heading:this.state.modalTitle,size:"lg"},m):m}}]),o}(i.Component);we(Be,"defaultProps",{pwtAuxData:{}});var Re=Object(d.compose)(ie.a,ue.a,Object(o.b)({name:"FakePinResource",key:"pin",options:function e(t){var n;return be({},t.fakeResource.options)}}))(Be);function Le(e){return g.a.createElement(Re,Object.assign({action:"create"},e))}var Ae=Object(d.compose)(Object(r.connect)(function(e){return{location:e.location}}),ie.a,ue.a)(Be);function Fe(e){return g.a.createElement(Ae,Object.assign({action:"repin"},e))}},q6Rf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var g=n("d6ZO"),u=n.n(g),r=n("DUIN"),o=n("2FON"),a=n.n(o),i=n("GGB8"),v=n.n(i),d=n("biwq"),S=n("W/Cr"),E=n("r/ec"),_=n("tmfO"),w=n("8N7E"),l=n("dZgC"),c=n("ZtCB"),f=n.n(c),p=n("MSpZ"),s=n("kxCB"),b=n("EfF6"),h=n("MQ2h"),m=n.n(h),y=n("Cjb7"),O=n("suNN"),C=n("jnRL"),j=n("+B8E"),P=n("OIxG"),k=n("iSgY"),T=n("gEaE"),x,I=function e(t){var n=t.isOpen,r=t.showCollaborativeIcon,o=t.showPrivateIcon,a=t.showSectionsIcon;return r||o||a?u.a.createElement(T.b,{display:"flex",direction:"row",paddingX:2},o&&u.a.createElement(k.a,{type:"secret"}),r&&u.a.createElement(k.a,{type:"group"}),a&&u.a.createElement(k.a,{type:n?"sectionsInline":"sections"})):null},B=n("BAXv"),R=n("rgtM"),L=n("8Zvv");function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t,n){return t&&N(e.prototype,t),n&&N(e,n),e}function D(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?z(e):t}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function U(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function")
;e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}function K(e,t){return(K=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var q=function(e){function a(){var e,t;F(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return W(z(z(t=D(this,(e=H(a)).call.apply(e,[this].concat(r))))),"state",{hovered:!1}),W(z(z(t)),"handleMouseEnter",function(){t.setState({hovered:!0})}),W(z(z(t)),"handleMouseLeave",function(){t.setState({hovered:!1})}),t}return U(a,e),M(a,[{key:"render",value:function e(){var t=this.state.hovered,n=this.props,r=n.board,o=n.onClick,a=n.requestContext,i=n.shouldOpenSections,c=!!r.section_count&&0<r.section_count,l=r.privacy===B.a.BoardPrivacy.SECRET,s=Object(L.a)(a,r.image_cover_url);return u.a.createElement(R.a,{id:"board-picker-section"},u.a.createElement(T.P,{onTouch:function e(){o(r)},onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},u.a.createElement(T.b,{color:t?"lightGray":"white",display:"flex",alignItems:"center"},u.a.createElement(T.b,{flex:"none",marginBottom:1,marginLeft:2,marginRight:2,marginTop:1,overflow:"hidden",width:24,height:24,dangerouslySetInlineStyle:{__style:{borderRadius:4}}},s&&i?u.a.createElement(T.p,{src:s,alt:"",naturalHeight:1,naturalWidth:1,fit:"cover"}):u.a.createElement(T.b,{color:i?"lightGray":"transparent",width:"100%",height:"100%"})),u.a.createElement(T.b,{flex:"grow",paddingY:1,overflow:"hidden"},u.a.createElement(T.K,{bold:i,truncate:!0},r.name)),t&&(0===r.section_count||!i)&&u.a.createElement(T.b,{color:"red",flex:"none",height:32,paddingX:3,display:"flex",alignItems:"center"},u.a.createElement(T.K,{color:"white",bold:!0},S.a._("Save","Save label on hover - Better save"))),r&&u.a.createElement(I,{isOpen:r.isOpen,showCollaborativeIcon:!!r.is_collaborative,showPrivateIcon:l,showSectionsIcon:c&&i}))))}}]),a}(g.Component);W(q,"defaultProps",{shouldOpenSections:!0});var Q=Object(h.compose)(P.b)(q);function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t,n){return t&&Y(e.prototype,t),n&&Y(e,n),e}function V(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?te(e):t}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function $(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}function ee(e,t){return(ee=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function te(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var re=function(e){function a(){var e,t;G(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return ne(te(te(t=V(this,(e=J(a)).call.apply(e,[this].concat(r))))),"state",{hovered:!1}),ne(te(te(t)),"handleMouseEnter",function(){t.setState({hovered:!0})}),ne(te(te(t)),"handleMouseLeave",function(){t.setState({hovered:!1})}),t}return $(a,e),Z(a,[{key:"render",value:function e(){var t=this.state.hovered,n=this.props,r=n.board,o=n.section,a=n.onClick;return u.a.createElement(T.P,{onTouch:function e(){return a(o,r)},onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},u.a.createElement(T.b,{color:t?"lightGray":"white",display:"flex",alignItems:"center"},u.a.createElement(T.b,{color:"transparent",flex:"none",marginBottom:1,marginLeft:2,marginRight:2,marginTop:1,overflow:"hidden",width:24,height:24}),u.a.createElement(T.b,{flex:"grow",paddingY:1},u.a.createElement(T.K,{truncate:!0},o.title)),t&&u.a.createElement(T.b,{color:"red",flex:"none",height:32,paddingX:3,display:"flex",alignItems:"center"},u.a.createElement(T.K,{color:"white",bold:!0},S.a._("Save","Save label on hover - Better save")))))}}]),a}(g.Component),oe=n("JyNp"),ae=function e(t){var n=t.board,r=t.sectionsResource,o=t.onClick,a=r&&r.data||[];return u.a.createElement(T.b,null,!r.isLoaded&&u.a.createElement(T.b,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",minHeight:200},u.a.createElement(T.G,{accessibilityLabel:S.a._("loading board picker","accessibility text for loading spinner"),show:!0})),r.isLoaded&&u.a.createElement(T.b,null,a.map(function(e){return u.a.createElement(re,{board:n,key:e.id,section:e,onClick:o})})))},ie=Object(oe.b)({name:"BoardSectionsRepinResource",key:"sectionsResource",options:function e(t){return{board_id:t.board.id}}},{allowStale:!1})(ae);function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ue(e,t,n){return t&&se(e.prototype,t),n&&se(e,n),e}function de(e,t){return!t||"object"!==ce(t)&&"function"!=typeof t?he(e):t}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function pe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}function be(e,t){return(be=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function he(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ye=function(e){function a(){var e,t;le(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return me(he(he(t=de(this,(e=fe(a)).call.apply(e,[this].concat(r))))),"state",{hovered:!1}),me(he(he(t)),"handleMouseEnter",function(){t.setState({hovered:!0})}),me(he(he(t)),"handleMouseLeave",function(){t.setState({hovered:!1})}),t}return pe(a,e),ue(a,[{key:"render",value:function e(){var t=this.state.hovered,n=this.props,r=n.onClick,o=n.title;return u.a.createElement(T.P,{onTouch:function e(){r({title:o})},onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},u.a.createElement(T.b,{color:t?"lightGray":"white",display:"flex",alignItems:"center"},u.a.createElement(T.b,{flex:"none",marginBottom:1,marginLeft:2,marginRight:2,marginTop:1,overflow:"hidden",width:24,height:24,dangerouslySetInlineStyle:{__style:{borderRadius:4}}},u.a.createElement(T.b,{color:"lightGray",width:"100%",height:"100%"})),u.a.createElement(T.b,{flex:"grow",paddingY:1},u.a.createElement(T.K,{bold:!0,truncate:!0},o))))}}]),a}(g.Component),ge=function e(t){var n=t.suggestionsResource,r=t.onClick,o=n&&n.data||[];return u.a.createElement(T.b,null,!n.isLoaded&&u.a.createElement(T.b,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",minHeight:200},u.a.createElement(T.G,{accessibilityLabel:S.a._("loading board suggestions","accessibility text for loading spinner"),show:!0})),n.isLoaded&&u.a.createElement(T.b,null,o.map(function(e,t){return u.a.createElement(ye,{key:t,title:e.title,onClick:r})})))},ve=Object(oe.b)({name:"BoardTitleSuggestionsResource",key:"suggestionsResource",options:function e(t){var n;return{pin_id:t.pinId}}},{allowStale:!1})(ge);function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e,t,n){return t&&_e(e.prototype,t),n&&_e(e,n),e}function Oe(e,t){return!t||"object"!==Se(t)&&"function"!=typeof t?ke(e):t}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function je(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}function Pe(e,t){return(Pe=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xe=function(e){function a(){var e,t;Ee(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return Te(ke(ke(t=Oe(this,(e=Ce(a)).call.apply(e,[this].concat(r))))),"state",{hovering:!1}),Te(ke(ke(t)),"handleMouseEnter",function(){t.setState({hovering:!0})}),Te(ke(ke(t)),"handleMouseLeave",function(){t.setState({hovering:!1})}),t}return je(a,e),we(a,[{key:"render",value:function e(){var t=this.props.onClick,n=this.state.hovering;return g.createElement(R.a,{id:"create-board"},g.createElement(T.P,{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onTouch:t,shape:"rounded"},g.createElement(T.b,{display:"flex",alignItems:"center",color:n?"lightGray":"white",padding:2,width:"100%"},g.createElement(T.b,{marginRight:2},g.createElement(T.n,{accessibilityLabel:"",size:"24",icon:"add-circle",color:"red"})),g.createElement(T.K,{truncate:!0,align:"center",bold:!0},S.a._("Create board")))))}}]),a}(g.Component),Ie=n("GDBS"),Be=n("4Gri"),Re=n("n9Oa"),Le=n("Qqx1"),Ae=n("Kqaz");function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function Ne(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){Ze(t,e,n[e])})}return t}function Me(e){return Ue(e)||He(e)||De()}function De(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function He(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function Ue(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function Ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function We(e,t,n){return t&&ze(e.prototype,t),n&&ze(e,n),e}function qe(e,t){return!t||"object"!==Fe(t)&&"function"!=typeof t?Ye(e):t}function Qe(e){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Xe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ge(e,t)}function Ge(e,t){return(Ge=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function Ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ve=function(e){function o(){var e,c;Ke(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ze(Ye(Ye(c=qe(this,(e=Qe(o)).call.apply(e,[this].concat(n))))),"state",{selectedBoardId:"",selectedBoardCategory:"",searchQuery:""}),Ze(Ye(Ye(c)),"getItems",function(){var e=c.props.boardResource.data,t=e.all_boards,n=e.boards_shortlist,r=t.map(function(e){return c.mapBoards(e,"allBoards",0)}),o=n.map(function(e,t){return c.mapBoards(e,"shortlist",t+1)}),a=c.state.searchQuery;return a.length>=Le.a?Me(Object(Re.a)(r,a)):Me(3<r.length&&o&&o.length?[{type:"header",title:S.a._("Top board suggestions","Header for top suggesions in board picker")}].concat(Me(o)):[]).concat([{type:"header",title:S.a._("All boards","Header for all boards in board picker")}].concat(Me(r)),Me(r.length<=3?[{type:"header",title:S.a._("Suggested board names","Header for suggested boards in board picker")}]:[]))}),Ze(Ye(Ye(c)),"mapBoards",function(e,t,n){var r=c.state,o=r.selectedBoardId,a=r.selectedBoardCategory,i;return Ne({},e,{category:t,isOpen:e.id===o&&t===a,gridIndex:n})}),Ze(Ye(Ye(c)),"handleSectionClick",function(e,t){var n=c.props,r=n.contextLog,o=n.onItemChosen;r(101,{component:13282,element:36,objectId:t.id,view:91,grid_index:t.gridIndex}),o({boardId:t.id,url:e.slug?"".concat(t.url).concat(e.slug,"/"):t.url,sectionId:e.id,title:e.title||""})}),Ze(Ye(Ye(c)),"handleBoardWithSectionsClick",function(e){var t=c.state,n=t.selectedBoardId,r=t.selectedBoardCategory,o=n===e.id&&r===e.category;c.setState({selectedBoardId:o?"":e.id,selectedBoardCategory:o?"":e.category})}),Ze(Ye(Ye(c)),"handleBoardClick",function(e){var t=e.board,n=e.toggleSections,r=c.props,o=r.contextLog,a=r.onItemChosen;n?c.handleBoardWithSectionsClick({id:t.id,category:t.category}):(o(101,{component:13282,element:36,objectId:t.id,view:91,grid_index:t.gridIndex}),a({boardId:t.id,url:t.url,title:t.name||""}))}),Ze(Ye(Ye(c)),"handleSearchQueryUpdate",function(t){c.setState(function(e){return Ne({},e,{searchQuery:t})})}),c}return Xe(o,e),We(o,[{key:"componentDidMount",value:function e(){this.props.boardResource.isLoaded&&this.setPWTLoadingEnd()}},{key:"componentDidUpdate",value:function e(t){!t.boardResource.isLoaded&&this.props.boardResource.isLoaded&&this.setPWTLoadingEnd()}},{key:"setPWTLoadingEnd",value:function e(){var t=this.props.boardResource.error?3:1;p.a.sendEvent(new Be.f({result:t}))}},{key:"render",value:function e(){var r=this,t=this.props,n=t.boardResource,o=t.onBoardCreate,a=t.pin,i=this.state.searchQuery,c=[];n.isLoaded&&!n.error&&(c=this.getItems());var l=c.filter(function(e){return e&&"allBoards"===e.category}).length;return u.a.createElement(T.b,{width:"100%",shape:"rounded",overflow:"hidden"},!n.isLoaded&&u.a.createElement(T.b,{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",minHeight:200},u.a.createElement(T.G,{accessibilityLabel:S.a._("loading board picker","accessibility text for loading spinner"),show:!0})),n.isLoaded&&u.a.createElement(T.b,{position:"relative"},u.a.createElement(T.b,{display:"flex",direction:"column",width:"100%",dangerouslySetInlineStyle:{__style:{zIndex:0}}},u.a.createElement(T.b,{display:"flex",padding:2},u.a.createElement(Ie.a,{accessibilityLabel:S.a._("Search through your boards","search bar placeholder text"),focused:!0,id:"pickerSearchField",onChange:function e(t){var n=t.value;return r.handleSearchQueryUpdate(n)},placeholder:S.a._("Search","search bar placeholder text"),value:i})),u.a.createElement(T.b,{maxHeight:240,overflow:"scrollY"},c.map(function(e,t){return"header"===e.type?u.a.createElement(T.b,{key:e.title,paddingX:2,paddingY:1,marginTop:0<t?2:1},u.a.createElement(T.K,{size:"sm"},e.title)):u.a.createElement(T.b,{key:"".concat(e.category,"-").concat(e.id)},u.a.createElement(Q,{board:e,onClick:function e(t){r.handleBoardClick({board:t,toggleSections:!!t.section_count})}}),e.isOpen&&u.a.createElement(T.b,null,u.a.createElement(Q,{board:e,onClick:function e(t){r.handleBoardClick({board:t,toggleSections:!1})},shouldOpenSections:!1}),u.a.createElement(ie,{board:e,onClick:r.handleSectionClick})))}),l<=3&&u.a.createElement(ve,{pinId:a.id,onClick:o})),u.a.createElement(T.j,null),u.a.createElement(T.b,{overflow:"hidden",dangerouslySetInlineStyle:{__style:{borderBottomRightRadius:8,borderBottomLeftRadius:8}}},u.a.createElement(xe,{onClick:function e(){return o({title:r.state.searchQuery})}})))))}}]),o}(g.Component),Je=Object(Ae.a)(Ve),$e=Object(oe.b)({name:"BoardPickerBoardsResource",key:"boardResource",options:function e(t){return{pin_id:t.pin.id,field_set_key:"board_picker",shortlist_suggestions:2}}},{allowStale:!1})(Je),et=n("m1HD"),tt=n("lip+"),nt=n("6oz1");function rt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){ot(t,e,n[e])})}return t}function ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var at=function e(t){var n=t.children,r=t.isOneTapMostRecent,o=t.mostRecentBoard,a=t.suggestedBoardsResource;return g.createElement(g.Fragment,null,n(rt({isOneTapMostRecent:r,mostRecentBoard:o,suggestedBoardsResource:a},a.data?{}:{isLoading:!0})))};function it(n){return g.createElement(nt.b,{name:"web_1tap_save_most_recent"},function(e){var t=e.anyEnabled;return g.createElement(tt.a,null,function(e){return g.createElement(at,Object.assign({},n,{username:e.username,isOneTapMostRecent:t}))})})}var ct=function e(t){var n;return{mostRecentBoard:t.mostRecentBoard}},lt=Object(h.compose)(Object(r.connect)(ct),Object(oe.b)({name:"BoardPickerBoardsShortlistResource",key:"suggestedBoardsResource",options:function e(t){return{pin_id:t.pinId,shortlist_length:5,num_shortlist_suggestions:5,suggestions_only:!0,min_confidence:.5}}}))(it),st=n("mSxZU"),ut=n("LzMI"),dt=n("te8a");function ft(e){return(ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function pt(e,t){if(null==e)return{};var n=bt(e,t),r,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function bt(e,t){if(null==e)return{};var n={},r=Object.keys(e),o,a;for(a=0;a<r.length;a++)o=r[a],0<=t.indexOf(o)||(n[o]=e[o]);return n}function ht(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){Ot(t,e,n[e])})}return t}function mt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gt(e,t,n){return t&&yt(e.prototype,t),n&&yt(e,n),e}function vt(e,t){return!t||"object"!==ft(t)&&"function"!=typeof t?wt(e):t}function St(e){return(St=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Et(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_t(e,t)}function _t(e,t){return(_t=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function wt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"PinBetterSave",function(){return jt});var Ct=4,jt=function(e){function o(){var e,d;mt(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ot(wt(wt(d=vt(this,(e=St(o)).call.apply(e,[this].concat(n))))),"state",{searchQuery:"",suggestedBoardTitle:"",showBoardFlyout:!1,showRepinModal:!1}),Ot(wt(wt(d)),"setBoardSaveCompletionPromise",function(e){d._repinCompletionPromise=e,d._repinCompletionPromise.promise.then(function(e){if(e.board){var t=e.board,n={boardId:t.id,title:t.name,url:t.url};d.updateSelectedBoardOrSection(n),d.updateSavedState(ht({},n,{localPinId:e.id}))}d.handleRepinHide()})}),Ot(wt(wt(d)),"updateSavedState",function(e){var t=d.props,n=t.save,r=t.onSave,o;n(ht({pinId:t.pin.id},e)),r&&r()}),Ot(wt(wt(d)),"updateSelectedBoardOrSection",function(e){var t=d.props,n,r;(0,t.selectBoardOrSection)(ht({pinId:t.pin.id},e))}),Ot(wt(wt(d)),"updateSelectedItem",function(e){var t,n=(e||d.props).initialSelection;!d.props.selectedItem&&n&&d.updateSelectedBoardOrSection(n)}),Ot(wt(wt(d)),"handleItemChosen",function(e){d.updateSelectedBoardOrSection(e),d.hideFlyout(!0),d.save(e)}),Ot(wt(wt(d)),"handleBoardCreate",function(){var e,t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).title,n=void 0===t?"":t;d.hideFlyout(!0),d.setState(function(e){return ht({},e,{suggestedBoardTitle:n,showRepinModal:!0})});var r=d.props.onToggleFlyout;r&&r(!0,!0)}),Ot(wt(wt(d)),"handleRepinHide",function(){d.setState(function(e){return ht({},e,{suggestedBoardTitle:"",showRepinModal:!1})});var e=d.props.onToggleFlyout;e&&e(!1,!1)}),Ot(wt(wt(d)),"handleBoardDropdownClick",function(e){var t=d.props,n=t.contextLog,r=t.pin.id,o=t.viewParameter;e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),d.state.showBoardFlyout?d.hideFlyout(!0):(n(101,{component:13282,element:10960,viewParameter:o,objectId:r}),p.a.sendEvent(new Be.e),d.showFlyout())}),Ot(wt(wt(d)),"handleSaveClick",function(e){var t=d.props,n=t.selectedItem,r=t.contextLog;n?(e&&e.preventDefault&&e.preventDefault(),e&&e.stopPropagation&&e.stopPropagation(),r(101,{component:13282,element:36,objectId:n.boardId,grid_index:4}),d.save(n)):d.handleBoardDropdownClick(e)}),Ot(wt(wt(d)),"handleEditSubmit",function(e){var t=e.boardId,n=e.sectionId,r=e.url,o=e.title,a=d.props,i=a.pin.id,c=a.savedInfo,l=(c=void 0===c?{}:c).localPinId;d.updateSavedState({pinId:i,localPinId:l,boardId:t,sectionId:n||"",url:r,title:o})}),Ot(wt(wt(d)),"resetPinSavedState",function(){d.updateSavedState({boardId:"",localPinId:"",sectionId:"",title:"",url:""})}),Ot(wt(wt(d)),"save",function(o){var e=d.props,t=e.isLimitedLogin,a=e.postRepinUpsellDisabled,i=e.postRepinMoreIdeasUpsell,c=e.showToast,l=e.requestContext,s=e.mostRecentBoard,u=e.setMostRecentBoard;return p.a.sendEvent(new Be.I),d.updateSavedState(o),p.a.sendEvent(new Be.J({result:1})),d.getPinResource(o).callCreate({showError:!t}).then(function(e){var t=e.resource_response.data,n=o.url,r;!a&&n&&Object(et.b)({boardId:o.boardId,boardUrl:n,requestContext:l,postRepinMoreIdeasUpsell:i})&&c(function(e){var t=e.onHide;return g.createElement(et.a,{boardId:o.boardId,boardName:o.title,boardUrl:n,isRepin:!0,onHide:t})}),d.updateSavedState(ht({},o,{localPinId:t.id})),y.b.publish("currentUser","pinCreated",t),y.b.publish(t.board.id,"pinCreated",{pin:t}),y.b.publish(t.board.id,"pinRepinned",t),d.props.incrementPinCount({boardId:o.boardId,sectionId:o.sectionId}),new j.c(l,"web_1tap_save_most_recent").enabledWithNoActivation()&&s&&o.boardId!==s.id&&u(o.boardId,o.title)}).catch(function(e){d.resetPinSavedState()})}),Ot(wt(wt(d)),"hideFlyout",function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=d.props.onToggleFlyout;d.setState({showBoardFlyout:!1}),t&&t(!1,e)}),d}return Et(o,e),gt(o,[{key:"UNSAFE_componentWillMount",value:function e(){this.updateSelectedItem()}},{key:"UNSAFE_componentWillReceiveProps",value:function e(t){this.updateSelectedItem(t)}},{key:"getPinResource",value:function e(t){var n=this.props,r=n.carousel_data,o=n.location,a=n.pin,i=r&&r.index,c="RepinResource",l=Object(d.a)(a,o)||"".concat(a.tracking_params,"~0"),s=ht({description:a.description||"",link:a.link,title:a.title||"",clientTrackingParams:l,board_id:t.boardId||"",pin_id:a.id||"",image_base64:a.image_base64,is_buyable_pin:!1,is_removable:a.promoted_is_removable,carousel_slot_index:i||0},t.sectionId?{section:t.sectionId}:{},Object(dt.b)(a)||{});return f.a.create(c,s)}},{key:"showFlyout",value:function e(){var t=this.props.onToggleFlyout;this.setState({showBoardFlyout:!0}),t&&t(!0,!0)}},{key:"shouldShowPostCreateUpsellToast",value:function e(){return new j.c(this.props.requestContext,"web_use_cases_more_ideas_post_board_create_upsell").enabled()}},{key:"render",value:function e(){var n=this,t=this.props,r=t.boardResource,o=t.inMasonry,a=t.inCloseup,i=t.onToggleModal,c=t.pin,l=t.selectedItem,s=t.savedInfo,u=t.unselectedText,d=t.viewParameter,f=this.state,p=f.showBoardFlyout,b=f.showRepinModal,h=f.suggestedBoardTitle,m=o?E.a:T.k,y=r?Je:$e;return g.createElement(T.b,{width:"100%"},s&&s.title?g.createElement(T.b,{display:"flex",justifyContent:"center",direction:"row",alignItems:"center","data-test-id":"saved-info"},g.createElement(T.b,{paddingX:1,flex:"grow"},g.createElement(_.b,{className:"underlineLink",stopPropagation:!0,style:{color:a?"#333":"#fff"},to:s.url},g.createElement(T.K,{color:a?"darkGray":"white",inline:!0},Object(O.b)(S.a._("Saved to {{ destination }}","Saved to label for better save"),{destination:g.createElement(T.K,{color:a?"darkGray":"white",bold:!0,inline:!0,key:"pin_auto_save_link"},s.title)})))),g.createElement(T.b,{paddingX:1},g.createElement(w.default,{component:0,onDelete:this.resetPinSavedState,onSubmit:this.handleEditSubmit,pinId:s.localPinId,onToggleModal:i,viewParameter:d}))):g.createElement(T.b,{alignItems:"center",display:"flex",width:"100%"},g.createElement("button",{className:v()("PinBetterSave__Dropdown",{"PinBetterSave__Dropdown--expanded":p}),"data-test-id":"PinBetterSaveDropdown",onClick:this.handleBoardDropdownClick,ref:function e(t){return n.anchor=t}},g.createElement(T.b,{marginRight:2,minWidth:0,overflow:"hidden"},l&&l.title?g.createElement(T.K,{truncate:!0,__dangerouslyIncreaseLineHeight:!0},l.title):g.createElement(T.K,{color:"gray",__dangerouslyIncreaseLineHeight:!0,truncate:!0},u)),g.createElement(T.b,{flex:"none",marginRight:-1,"data-test-id":"boardSelectionDropdown"},g.createElement(T.n,{accessibilityLabel:S.a._("Select a board you want to save to","BetterSave accessibility label to change the board"),color:"darkGray",icon:"arrow-down",size:12}))),!p&&g.createElement("button",{className:"PinBetterSave__Button",onClick:this.handleSaveClick,"data-test-id":"PinBetterSaveButton"},g.createElement(T.K,{bold:!0,color:"white"},S.a._("Save","BetterSave Save label")))),b&&g.createElement(st.c,{isInModal:!0,onClose:this.handleRepinHide,pin:c,pwtAuxData:{pin_create_method:"repin"},shouldShowPostCreateUpsellToast:this.shouldShowPostCreateUpsellToast(),setCompletionPromise:this.setBoardSaveCompletionPromise,showCreate:!0,suggestedBoardTitle:h,additionalCreateFields:{is_stl_pin:Object(dt.d)(c)}}),this.state.showBoardFlyout&&g.createElement(m,{anchor:this.anchor,idealDirection:"down",onDismiss:this.hideFlyout,positionRelativeToAnchor:!o,size:"md"},g.createElement(y,{boardResource:r,selectedItem:l,onItemChosen:this.handleItemChosen,onBoardCreate:this.handleBoardCreate,pin:c})))}}]),o}(g.Component),Pt=function e(t,n){var r=n.pin.id,o=t.pins[r],a=t.ui.postRepinMoreIdeasUpsell;return{carousel_data:o.carousel_data,isLimitedLogin:t.viewer.isLimitedLogin,savedInfo:o&&o.savedInfo,selectedItem:o&&o.selectedItem,location:t.location,postRepinMoreIdeasUpsell:a,mostRecentBoard:t.mostRecentBoard}},kt=function e(o){return{incrementPinCount:function e(t){var n=t.boardId,r=t.sectionId;return o(Object(b.d)({boardId:n,sectionId:r,increment:1}))},save:function e(t){return o(Object(ut.a)(t))},selectBoardOrSection:function e(t){return o(Object(ut.b)(t))},setMostRecentBoard:function e(t,n){return o(Object(C.a)(t,n))}}},Tt=Object(h.compose)(Object(r.connect)(Pt,kt),s.a,Ae.a)(jt);function xt(e){var t=e.initialSelection,c=pt(e,["initialSelection"]);return g.createElement(l.b,null,function(i){return t?g.createElement(Tt,Object.assign({},c,{postRepinUpsellDisabled:!0,requestContext:i,initialSelection:t,unselectedText:t.title})):g.createElement(lt,{pinId:c.pin.id},function(e){var t=e.isLoading,n=e.isOneTapMostRecent,r=e.mostRecentBoard,o=e.suggestedBoardsResource,a=o.data&&o.data[0];return g.createElement(Tt,Object.assign({},c,{requestContext:i,initialSelection:!t&&a&&{boardId:a.id,title:a.name,url:a.url}||!t&&!a&&n&&r&&{boardId:r.id,title:r.name}||void 0,unselectedText:t?"...":S.a._("Select","BetterSave label to pick a board from the list")}))})})}var It=t.default=g.memo(function(e){if(e.prefetchBoards){var t=Object(oe.b)({name:"BoardPickerBoardsResource",key:"boardResource",options:function e(t){return{pin_id:t.pin.id,field_set_key:"board_picker",shortlist_suggestions:2}}},{allowStale:!1})(xt);return g.createElement(t,e)}return g.createElement(xt,e)})},vBru:function(e,t,n){"use strict";var h=n("d6ZO"),m=n.n(h),r=n("DUIN"),y=n("WxTF"),g=n("BAXv"),v=n("W/Cr"),S=n("hkVh"),o=n("NyaW"),a=n("MQ2h"),i=n.n(a),E=n("gEaE");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function d(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?_(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e){function a(){var e,t;l(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return w(_(_(t=d(this,(e=f(a)).call.apply(e,[this].concat(r))))),"handleBoardCreateFormSubmit",function(e){e.preventDefault(),t.props.onBoardCreate()}),t}return p(a,e),u(a,[{key:"render",value:function e(){var t=this.props,n=t.createBoardError,r=t.inputName,o=t.nameValidatorErrors,a=t.onCancel,i=t.onChangeBoardName,c=t.onChangeBoardPrivacy,l=t.onInvite,s=t.privacy,u=t.saving,d=t.showTitle,f=t.isAdAccountOwner,p=0===o.length,b=s===g.a.BoardPrivacy.SECRET;return m.a.createElement(E.b,{color:"white",height:"100%",position:"absolute",width:"100%",top:!0,left:!0},m.a.createElement("form",{onSubmit:this.handleBoardCreateFormSubmit,style:{height:"100%"}},m.a.createElement(E.b,{direction:"column",display:"flex",height:"100%"},d&&m.a.createElement(E.b,{display:"flex",marginTop:3,paddingX:6,paddingY:3},m.a.createElement(E.K,{size:"xl",bold:!0},v.a._("Create board"))),m.a.createElement(E.b,{padding:3},m.a.createElement(E.b,{marginBottom:2},m.a.createElement(E.q,{htmlFor:"boardEditName"},m.a.createElement(E.K,null,v.a._("Name")))),m.a.createElement(E.b,null,m.a.createElement(E.M,{errorMessage:o.join(", "),id:"boardEditName",name:"boardName",onChange:function e(t){var n=t.value;return i(n)},placeholder:v.a._('Like "Places to Go" or "Recipes to Make"'),value:r}))),m.a.createElement(E.j,null),f&&m.a.createElement(m.a.Fragment,null,m.a.createElement(E.b,{padding:3},m.a.createElement(E.b,{marginBottom:2},m.a.createElement(E.q,{htmlFor:"secret"},m.a.createElement(E.K,null,v.a._("Secret","secret board")))),m.a.createElement(E.b,null,m.a.createElement(E.I,{onChange:c,id:"secret",switched:b}))),m.a.createElement(E.j,null),m.a.createElement(E.b,{display:"flex",flex:"grow",overflow:"hidden"},m.a.createElement(E.b,{width:"100%"},m.a.createElement(y.a,{onSelectedCollaboratorsChange:l}))),m.a.createElement(E.j,null)),m.a.createElement(E.b,{padding:6},!!n&&m.a.createElement(E.b,{marginBottom:3},m.a.createElement(E.K,{align:"center",bold:!0,color:"red",size:"sm"},n)),m.a.createElement(E.b,{display:"flex",justifyContent:"between"},m.a.createElement(E.c,{inline:!0,onClick:a,text:v.a._("Cancel","cancel board create")}),m.a.createElement(S.a,{disabled:!r.trim()||!p||!!n||u,submitting:u,text:v.a._("Create","create a new board")}))))))}}]),a}(h.Component);function C(e,t){var n=e.advertiser,r=e.viewer;return r.isAuth&&n?{isAdAccountOwner:n.owner_user_id===r.id}:{isAdAccountOwner:r.isAuth}}var j=Object(a.compose)(o.a,Object(r.connect)(C))(O),P=n("Td/c"),k=n("JyNp"),T=n("n9Oa"),x=n("Qqx1");function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t,n){return t&&R(e.prototype,t),n&&R(e,n),e}function A(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?D(e):t}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}function M(e,t){return(M=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var U=function(e){function a(){var e,o;B(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return H(D(D(o=A(this,(e=F(a)).call.apply(e,[this].concat(n))))),"getSections",function(e){var t=o.props,n=t.board,r=t.sectionsResource.data;return e.length>=x.a?[{items:Object(T.a)([n],e),customProps:{inSectionSelection:!0}},{items:Object(T.a)(r,e,"title")}]:[{items:[n],customProps:{inSectionSelection:!0}},{items:r}]}),o}return N(a,e),L(a,[{key:"render",value:function e(){var t=this.props,n=t.sectionsResource,r=n.error,o=n.isLoaded,a=t.boardSavedTo,i=t.isSelectMode,c=t.onSectionCreate,l=t.onSectionSelected,s=t.pinId;return m.a.createElement(x.b,{isSelectMode:i,boardSavedTo:a,createButtonLabel:v.a._("Add section","Button for creating a board section"),hasLoadError:!!r,isLoaded:o,getSections:this.getSections,onCreate:c,onSelected:l,pinId:s})}}]),a}(h.Component),K=Object(k.b)({name:"BoardSectionsRepinResource",key:"sectionsResource",options:function e(t){return{board_id:t.board.id}}})(U),z=n("S+Qs");function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e,t,n){return t&&Q(e.prototype,t),n&&Q(e,n),e}function G(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?J(e):t}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function Z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}function V(e,t){return(V=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){ee(t,e,n[e])})}return t}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var te=2,ne=3,re=void 0,oe=function e(t){var n=[],r=[];return t.forEach(function(e){e.name.match(/^\d/)?r.push(e):n.push(e)}),n.concat(r)};function ae(e,t,n){return $({},e?{pin_id:e}:{},t?{username:t}:{},n?{advertiser_id:n}:{},{field_set_key:"board_picker",limit:re,shortlist_suggestions:te})}var ie=function(e){function o(){var e,a;q(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ee(J(J(a=G(this,(e=Y(o)).call.apply(e,[this].concat(n))))),"getSections",function(e){var t=a.props.boardResource.data;if(!t)return[];var n=t.all_boards,r=t.boards_shortlist,o=oe(n);return o.length<=3?[{items:o}]:e.length>=x.a?[{items:Object(T.a)(o,e)}]:[r.length?{items:r,title:v.a._("Top choices")}:{items:[]},{items:o,title:v.a._("All boards","title for board picker all boards section")}]}),a}return Z(o,e),X(o,[{key:"render",value:function e(){var t=this.props,n=t.boardResource,r=n.data,o=n.error,a=n.isLoaded,i=t.boardSavedTo,c=t.isSelectMode,l=t.onBoardCreate,s=t.onBoardSelected,u=t.pinId,d=a&&!!r&&r.all_boards.length<=3;return m.a.createElement(x.b,{isSelectMode:c,boardSavedTo:i,hasLoadError:!!o,hasLowBoardCount:d,isLoaded:a,getSections:this.getSections,onCreate:l,onSelected:s,pinId:u})}}]),o}(h.Component);function ce(e,t){var n=e.advertiser,r=e.viewer;return r.isAuth&&n&&n.owner_user_id!==r.id?{advertiser_id:n.id,username:n.owner_user_id}:{}}var le=Object(a.compose)(Object(k.b)({name:"BoardPickerBoardsResource",key:"boardResource",options:function e(t){return ae(t.pinId,t.username,t.advertiser_id)}}),Object(r.connect)(ce))(ie),se=n("Kqaz");function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function de(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(e){Se(t,e,n[e])})}return t}function fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e,t,n){return t&&pe(e.prototype,t),n&&pe(e,n),e}function he(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?ve(e):t}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function e(t){return t.__proto__||Object.getPrototypeOf(t)})(e)}function ye(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}function ge(e,t){return(ge=Object.setPrototypeOf||function e(t,n){return t.__proto__=n,t})(e,t)}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ee=function(e){function o(){var e,u;fe(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Se(ve(ve(u=he(this,(e=me(o)).call.apply(e,[this].concat(n))))),"state",{newName:"",selectedSectionBoard:null,showCreate:u.props.showCreate||!1,inviteQueue:{}}),Se(ve(ve(u)),"close",function(){var e=u.state,t=e.selectedSectionBoard,n=e.showCreate,r=u.props.onClose;n?u.setState({showCreate:!1},u.manageModalTitle):t?u.setState({selectedSectionBoard:null},u.manageModalTitle):r()}),Se(ve(ve(u)),"sendInvites",function(t){var n=u.state.inviteQueue;Object.keys(n).forEach(function(e){n[e].resource(t.id,[e])})}),Se(ve(ve(u)),"handleInvite",function(e){var t=u.state.inviteQueue;if(t[e.id]){var n=de({},t);delete n[e.id],u.setState({inviteQueue:n})}else{var r=Object.assign({},t,Se({},e.id,e));u.setState({inviteQueue:r})}}),Se(ve(ve(u)),"handleBoardSave",function(e){var t=u.state.selectedSectionBoard,n=u.props,r=n.onBoardSave,o,a;if((0,n.invalidateResource)(),t&&"board_section"===e.type)return r(t,e);var i=e,c=i.section_count,l,s;!t&&0<(void 0===c?0:c)?u.setState({selectedSectionBoard:i},u.manageModalTitle):(u.sendInvites(e),r(i))}),Se(ve(ve(u)),"handleCreate",function(r){return function(e){e=e||"",u.setState({newName:e,showCreate:!0},u.manageModalTitle);var t=r?13105:13025,n=r?10306:249;u.props.contextLog(101,{component:t,element:n})}}),Se(ve(ve(u)),"manageModalTitle",function(){var e=u.props.setModalTitle;e&&(u.state.showCreate&&u.state.selectedSectionBoard?e(v.a._("Add section","Repin title for making a board section")):u.state.showCreate?e(v.a._("Create board","Repin title for making a new board")):u.state.selectedSectionBoard?e(v.a._("Choose section","Repin title for choosing a board section")):e(v.a._("Choose board","Repin title for choosing a board")))}),u}return ye(o,e),be(o,[{key:"render",value:function e(){var t=this.props,n=t.boardSavedTo,r=t.isRepin,o=t.isSelectMode,a=t.pinId,i=t.setModalTitle,c=t.suggestedBoardTitle,l=this.state,s=l.inviteQueue,u=l.newName,d=l.selectedSectionBoard,f=l.showCreate,p=!!d,b=!i;return h.createElement(E.b,{display:"flex",width:"100%",position:"relative"},h.createElement(E.b,{width:"100%",display:"flex",direction:"column",marginTop:4},d?h.createElement(K,{isSelectMode:o,board:d,boardSavedTo:n,onSectionCreate:this.handleCreate(p),onSectionSelected:this.handleBoardSave}):h.createElement(le,{isSelectMode:o,boardSavedTo:n,onBoardCreate:this.handleCreate(p),onBoardSelected:this.handleBoardSave,pinId:a})),f&&!d&&h.createElement(j,{prefilledName:u||c,onCancel:this.close,onCreate:this.handleBoardSave,onInvite:this.handleInvite,inviteQueue:s,showTitle:b}),f&&d&&h.createElement(P.a,{board:d,completeCreateSectionAction:this.handleBoardSave,initialName:u,isRepin:r,onClearModal:this.close,showTitle:b}))}}]),o}(h.Component);function _e(t,n){return{invalidateResource:function e(){t(Object(z.f)("BoardPickerBoardsResource",ae(n.pinId)))}}}var we=t.a=Object(a.compose)(se.a,Object(r.connect)(null,_e))(Ee)}});